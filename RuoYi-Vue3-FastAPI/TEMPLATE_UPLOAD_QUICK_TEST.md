# 模板上传功能快速测试

## 修复内容

✅ 已将模板上传功能整合到新增对话框中  
✅ 修复了上传URL错误（统一使用 `/common/upload`）  
✅ 统一了字段命名（`filePath` 对应后端 `file_path`）

## 快速测试步骤

### 1. 启动服务

```bash
# 确保后端运行在 http://localhost:9099
# 确保前端运行在 http://localhost:80
```

### 2. 访问模板管理页面

1. 浏览器访问：http://localhost
2. 登录系统（admin/admin123）
3. 导航到：**论文系统 > 模板管理**

### 3. 测试新增模板

1. **点击"新增模板"按钮**
   - 应该弹出对话框

2. **填写基本信息**
   ```
   模板名称：测试模板
   模板类型：选择一个类型
   模板描述：测试描述
   ```

3. **上传Word模板文件** ⭐ 新功能
   - 点击"上传Word模板"按钮
   - 选择一个 .docx 或 .doc 文件
   - ✅ 应该显示：模板文件上传成功
   - ✅ 文件列表中显示文件名

4. **上传缩略图**
   - 点击缩略图上传区域
   - 选择一张图片
   - ✅ 应该显示：缩略图上传成功
   - ✅ 显示图片预览

5. **保存**
   - 点击"确定"按钮
   - ✅ 应该显示：操作成功
   - ✅ 列表中显示新增的模板

### 4. 测试文件验证

**测试1：上传非Word文件**
- 尝试上传 PDF 或 TXT 文件
- ✅ 应该显示错误：只能上传 Word 文档!

**测试2：上传大文件**
- 尝试上传超过 10MB 的文件
- ✅ 应该显示错误：文件大小不能超过 10MB!

## 主要改进

### 修复前
- ❌ 需要点击"上传模板"按钮单独上传
- ❌ 两步操作，流程复杂

### 修复后
- ✅ 在新增对话框中直接上传
- ✅ 一步完成，流程简化

## 遇到问题？

### 问题1：上传失败，显示404
**解决方案**：
1. 检查后端是否运行：http://localhost:9099/docs
2. 确认 `/common/upload` 接口存在

### 问题2：上传成功但没有保存
**解决方案**：
1. 打开浏览器开发者工具（F12）
2. 查看 Network 标签
3. 检查请求和响应数据

### 问题3：缩略图不显示
**解决方案**：
1. 检查返回的URL是否正确
2. 查看浏览器控制台是否有错误

## 详细文档

- [修复总结](.kiro/specs/ai-thesis-writing/TEMPLATE_UPLOAD_FIX.md)
- [测试指南](.kiro/specs/ai-thesis-writing/TEMPLATE_UPLOAD_TEST_GUIDE.md)
- [会话总结](.kiro/specs/ai-thesis-writing/SESSION_12_TEMPLATE_UPLOAD_FIX.md)

## 反馈

如果发现任何问题，请提供：
1. 操作步骤
2. 错误提示
3. 浏览器控制台截图
